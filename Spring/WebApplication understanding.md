[스프링 MVC - 1편](https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81-mvc-1)을 수강하며 정리한 내용이다.


### 웹 애플리케이션 이해


#### 웹 서버와 웹 애플리케이션 서버(WAS) 차이
* 웹 서버: 정적 리소스 / WAS: 애플리케이션 로직
* 두 용어, 경계 모두 모호하나, WAS는 애플리케이션 코드를 실행하는데 더 특화된 서버라고 생각하기


#### 웹 시스템 구성 - WEB, WAS, DB
* 정적 리소스는 WEB 서버가 처리하고, 애플리케이션 로직과 같은 동적인 처리 필요 시 WAS에 요청을 위임하여
* WAS는 정적 리소스도 처리할 수 있지만 중요한 애플리케이션 로직 처리를 전담함
* 따라서 효율적인 리소스 관리가 가능 -> 정적 리소스가 많이 사용될 시, WEB 서버 증설. 애플리케이션 리소스가 많이 사용될 시, WAS 증설.
* 정적 리소스를 제공하는 WEB 서버는 잘 죽지 않으나, 애플리케이션 리소스를 제공하는 WAS는 잘 죽기 때문에 WAS, DB 장애 시 WEB 서버가 오류 화면 제공이 가능하다.


#### 서블릿

**특징**
* urlPatterns()의 URL이 호출되면 서블릿 코드 실행
* HTTP 요청 정보 편하게 사용할 수 있는 HttpServletRequest
* HTTP 응답 정보 편하게 사용할 수 있는 HttpServletResponse

**HTTP 요청, 응답 흐름**
* HTTP 요청시 WAS는 Request, Response 객체를 새로 생성해 서블릿 객체 호출
* 개발자는 Request 객체에서 HTTP 요청 정보를 꺼내서 사용
* 개발자는 Response 객체에서 HTTP 응답 정보 입력
* WAS는 Response 객체에 담겨있는 내용으로 HTTP 응답 정보 생성


#### 서블릿 컨테이너

* 톰캣과 같이 서블릿을 지원하는 웹 애플리케이션 서버(WAS)
* 서블릿 객체를 생성, 초기화, 호출, 종료하는 생명주기를 관리함
* 서블릿 객체는 싱글톤으로 관리
* JSP도 서블릿으로 변환돼서 사용
* 동시 요청을 위한 멀티 쓰레드 처리 지원


#### 동시 요청 - 멀티 쓰레드

**쓰레드**
* 애플리케이션 코드를 하나하나 순차적으로 실행하는 것
* (자바 메인 메서드 처음 실행하면 main이라는 이름의 쓰레드가 실행하듯)
* 쓰레드 없으면 자바 애플리케이션 실행 불가능
* 쓰레드는 한 번에 하나의 코드 라인만 수행
* 동시 처리 필요 시, 쓰레드 추가로 생성

**쓰레드 풀**
* 요청마다 쓰레드를 생성 시, 동시 요청을 처리할 수는 있으나 생성 비용이 매우 비싼 쓰레드를 요청마다 생성해야 하며, 응답 속도가 늦어질 수 있고 고객 요청이 많이 올 시 서버가 죽을 수도 있는 단점이 있다.
* 이러한 요청마다 쓰레드를 생성하는 방식의 단점을 보완한 것이 쓰레드 풀
* 필요한 쓰레드를 쓰레드 풀에 보관하고 관리한다.
* 쓰레드 풀에 생성 가능한 쓰레드의 최대치를 관리한다.(톰캣은 최대 200개 설정 가능)
* 쓰레드가 필요하면 이미 생성된 쓰레드 풀에서 가져다 쓰고 다 쓰고 나면 쓰레드 풀에 다시 반납하는 방식.
* 쓰레드의 최대치를 설정할 수 있으므로 너무 많은 요청이 와도 안전하게 처리가 가능하다.

**WAS의 멀티 쓰레드 지원**
* 멀티 쓰레드에 대한 부분은 WAS가 처리하여 개발자는 따로 멀티 쓰레드 관련 코드를 신경쓰지 않아도 되며, 마치 싱글 쓰레드 프로그래밍을 하듯 개발이 가능하다. 그러나 멀티 쓰레드 환경이므로 싱글톤 객체는 주의해서 사용해야 한다.



***


**HTTP API**
* HTML이 아닌 데이터를 전달
* 주로 JSON 형식을 사용하며 다양한 시스템에서 호출한다.
* 데이터만 주고 받으며 UI가 필요할 시 클라이언트가 별도로 처리해야 한다.

**SSR - 서버 사이드 렌더링**
* HTML 최종 결과를 서버에서 만들어서 웹 브라우저에 전달
* 주로 정적인 화면에 사용
* JSP, 타임리프 -> 백엔드

**CSR - 클라이언트 사이드 렌더링**
* HTML 결과를 자바스크립트를 사용해 웹 브라우저에서 동적으로 생성해서 적용
* 웹 환경을 마치 앱처럼 부분부분 변경 가능
* React, Vue.js -> 웹 프론트엔드