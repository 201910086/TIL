[스프링 핵심 원리 - 기본편](https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81-%ED%95%B5%EC%8B%AC-%EC%9B%90%EB%A6%AC-%EA%B8%B0%EB%B3%B8%ED%8E%B8)을 수강하며 정리한 내용이다.


### 빈 생명주기 콜백

애플리케이션 시작 시점에 필요한 연결을 미리 해두고, 종료 시점에 연결을 모두 종료하는 작업을 진행하려면 객체의 초기화와 종료 작업이 필요하다.

스프링 빈은 **객체 생성 -> 의존관계 주입**과 같은 생명주기를 가진다.
스프링 빈은 이 생명주기가 다 끝난 다음에야 데이터를 사용할 준비가 완료되기 때문에 초기화 작업은 의존관계 주입이 모두 완료되고 난 다음 호출해야 한다.
* 스프링은 의존관계 주입이 완료되면 스프링 빈에게 콜백 메서드를 통해 초기화 시점을 알려주는 다양한 기능을 제공
* 또한 스프링 컨테이너가 종료되기 직전에 소멸 콜백을 준다.
* -> 따라서 안전하게 종료 작업을 진행할 수 있다.

**스프링 빈의 이벤트 라이프사이클**
스프링 컨테이너 생성 -> 스프링 빈 생성 -> 의존관계 주입 -> 초기화 콜백 -> 사용 -> 소멸전 콜백 -> 스프링 종료


1. 인터페이스(InitializingBean, DisposableBean)
2. 설정 정보에 초기화 메서드, 종료 메서드 지정
3. @PostConstruct, @PreDestory 애노테이션 지원
위와 같은 3가지 방법으로 빈 생명주기 콜백 지원

#### 인터페이스(InitializingBean, DisposableBean)
```
public class NetworkClient implements InitializingBean, DisposableBean {
```
* ```InitializingBean```은 afterPropertiesSet()메서드로 초기화를 지원
* ```DisposableBean```은 destroy() 메서드로 소멸을 지원
**초기화, 소멸 인터페이스 단점**
* 스프링 전용 인터페이스로, 해당 코드가 스프링 전용 인터페이스에 의존
* 초기화, 소멸 메서드 이름 변경 불가
* 외부 라이브러리에 적용 불가
(초기에 나온 방법이라 최근에는 거의 사용하지 않음)


#### 설정 정보에 초기화 메서드, 종료 메서드 지정
설정 정보에 ```@Bean(initMethod = "init", destroyMethod = "close")```와 같이 초기화, 소멸 메스드를 지정할 수 있다.
* 메서드 이름을 자유롭게 지정 가능
* 스프링 빈이 스프링 코드에 의존하지 x
* 코드가 아닌 설정 정보를 사용하므로 코드를 고칠 수 없는 외부 라이브러리에도 초기화, 종료 메서드 적용 가능


#### 애노테이션 @PostConstruct, @PreDestory
각각의 초기화, 소멸 메서드에 애노테이션을 달아주면 된다.
가장 편리하게 초기화 및 종료를 실행할 수 있다.
* 최신 스프링에서 가장 권장하는 방법
* 애노테이션 하나만 붙이면 되므로 매우 편리
* 스프링에 종속적인 기술이 아닌 자바 표준. 스프링이 아닌 다른 컨테이너에서도 동작
* 컴포넌트 스캔과 잘 어울린다.
* 유일한 단점 : 외부 라이브러리에는 적용하지 못함. 외부 라이브러리 초기화, 종료 필요 시 -> @Bean 기능 사용
