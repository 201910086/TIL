[스프링 핵심 원리 - 기본편](https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81-%ED%95%B5%EC%8B%AC-%EC%9B%90%EB%A6%AC-%EA%B8%B0%EB%B3%B8%ED%8E%B8)을 수강하며 정리한 내용이다.

### 웹 애플리케이션과 싱글톤
***
* 스프링은 애초에 기업용 온라인 서비스 기술을 지원하기 위해 탄생한 것으로, 대부분의 스프링 애플리케이션은 웹 애플리케이션이다.
* 웹 애플리케이션은 보통 고객이 동시에 요청한다.
* 스프링이 없는 순수한 DI 컨테이너는 AppConfig를 요청할 때마다 객체를 생성하는데, 이는 메모리 낭비가 심하므로 이것을 해결하기 위한 방안으로 싱글톤 패턴이 있다.


### 싱글톤 패턴
***
* 클래스의 인스턴스가 딱 1개만 생성되는 것을 보장하는 디자인 패턴
* 따라서 private 생성자를 통해 객체 인스턴스를 2개 이상 생성하지 못하도록 막아야 함


**싱글톤 패턴 문제점**
* 싱글톤 패턴 구현하는 코드 자체가 많이 들어간다
* 의존관계상 클라이언트가 구체 클래스에 의존 -> DIP 위반
* 클라이언트가 구체 클래스에 의존하여 OCP도 위반할 가능성 높음
* 테스트하기 어렵다
* 내부 속성을 변경하거나 초기화하기 어렵다
* private 생성자로 자식 클래스를 만들기 어렵다
* 결론적으로 유연성이 떨어진다
* 안티패턴으로 불리기도 한다


### 싱글톤 컨테이너
***
* 스프링 컨테이너는 싱글톤 패턴을 적용하지 않아도 객체 인스턴스를 싱글톤으로 관리한다
* 스프링 컨테이너는 싱글톤 컨테이너 역할을 하는데,
* 싱글톤 레지스트리 : 이렇게 싱글톤 객체를 생성하고 관리하는 기능
* 이러한 스프링 컨테이너의 기능으로 싱글톤 패톤의 모든 단점을 해결하면서 객체 싱글톤 유지 가능
    - 싱글톤 패턴을 위한 지저분한 코드 필요 x
    - DIP, OCP, 테스트, private 생성자로부터 자유롭게 싱글톤 사용 가능


**싱글톤 방식의 주의점**
* 객체 인스턴스를 하나만 생성, 공유하는 싱글톤 방식은 여러 클라이언트가 하나의 객체를 공유하므로 상태를 유지(stateful)하게 설계하면 안된다.
* 무상태(stateless)로 설계해야 한다.
    - 특정 클라이언트에 의존적인 필드 있으면 x
    - 특정 클라이언트가 값을 변경할 수 있는 필드 있으면 x
    - 가급적 읽기만 가능해야 함
    - 필드 대신 자바에서 공유되지 않는 지역변수, 파라미터, ThreadLocal 등을 사용해야 함


**@Configuration**
* ```@Bean```만 사용해도 스프링 빈이 등록되지만, 싱글톤을 보장하지는 않는다.
* ```@Configuration```을 통해 싱글톤이 보장되도록 해준다.
